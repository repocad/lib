text(-17 112 7 "reg. OY-____") #A/C REGISTRATION
text(-37 96 6 "pilot.: John Doe") #PILOT
text(18 133 7 "from: EKVJ") #FROM
text(50 133 7 "to: EKRD") #FROM

    numberOfWaypoints = 7 #number of waypoints 

    tas =       90    # TAS in knots 
    gph =       3.5   # FUEL in Gallons/hour
    glide =     8     # glide ratio 1:x
    deviation = 1

#WP1
    title1 =   "VIDEBAEK"
    dist1 =    20
    tt1 =      90
    windDir1 = 135
    windVel1 = 30

#WP2
    title2 =   "IKAST"
    dist2 =    10
    tt2 =      200
    windDir2 = 10
    windVel2 = 15

#WP3
    title3 =   "IKAST"
    dist3 =    10
    tt3 =      200
    windDir3 = 10
    windVel3 = 15

#WP4
    title4 =   "IKAST"
    dist4 =    10
    tt4 =      200
    windDir4 = 10
    windVel4 = 15

#WP5
    title5 =   "IKAST"    
    dist5 =    10
    tt5 =      200
    windDir5 = 10
    windVel5 = 15

## END USER INPUT do not edit below this point ##

############ WAYPOINT CALCULATIONS ##############


#### WPT1 ####

n1 = sin(radians(tt1 - windDir1))
wca1a = (windVel1 * n1)
wca1 = degrees(wca1a / tas * -1)
th1 = toInt(tt1 + wca1)
c1a = cos(radians(wca1))
c1b = cos(radians(tt1 - windDir1))
gs1a = tas * c1a
gs1b = windVel1 * c1b
gs1 = gs1a - gs1b
timeHr1 = dist1 / gs1
time1 = timeHr1 * 60

y = 60 # vertical offset

text(-33 y + 26 8 title1) # TITLE
text(-33 y + 15.5 8 tt1)
text(2 y + 15.5 8 dist1)
text(9 y + 31 4 windVel1)
text(3 y + 31 4 windDir1)
text(-33 y + 6.5 8 toInt(wca1)) #WCA
text(-15 y + 15.5 8 th1) #TH
text(-15 y + 6.5 8 th1 + deviation) #MH

text(18 y + 26.5 8 toInt(gs1)) #GS
text(18 y + 15.5 8 toInt(time1)) #TIME, MIN


#### WPT2 ####

n2 = sin(radians(tt2 - windDir2))
wca2a = (windVel2 * n2)
wca2 = degrees(wca2a / tas * -1)
th2 = toInt(tt2 + wca2)
c2a = cos(radians(wca2))
c2b = cos(radians(tt2 - windDir2))
gs2a = tas * c2a
gs2b = windVel2 * c2b
gs2 = gs2a - gs2b
timeHr2 = dist2 / gs2
time2 = timeHr2 * 60 

y = 31 # vertical offset

text(-33 y + 26 8 title2) # TITLE
text(-33 y + 15.5 8 tt2)
text(2 y + 15.5 8 dist2)
text(2 y + 6.5 8 dist1 + dist2) #DIST ACC
text(9 y + 31 4 windVel2)
text(3 y + 31 4 windDir2)
text(-33 y + 6.5 8 toInt(wca2)) #WCA
text(-15 y + 15.5 8 th2) #TH
text(-15 y + 6.5 8 th2 + deviation) #MH

text(18 y + 26.5 8 toInt(gs2)) #GS
text(18 y + 15.5 8 toInt(time2)) #TIME, MIN
text(18 y + 6.5 8 toInt(time1 + time2)) #TIME, MIN


#### WPT3 ####

n3 = sin(radians(tt3 - windDir3))
wca3a = (windVel3 * n3)
wca3 = degrees(wca2a / tas * -1)
th3 = toInt(tt3 + wca3)
c3a = cos(radians(wca3))
c3b = cos(radians(tt3 - windDir3))
gs3a = tas * c3a
gs3b = windVel2 * c3b
gs3 = gs3a - gs3b
timeHr3 = dist3 / gs3
time3 = timeHr3 * 60 

y = 2 # vertical offset

text(-33 y + 26 8 title2) # TITLE
text(-33 y + 15.5 8 tt2)
text(2 y + 15.5 8 dist2)
text(2 y + 6.5 8 dist1 + dist2) #DIST ACC
text(9 y + 31 4 windVel2)
text(3 y + 31 4 windDir2)
text(-33 y + 6.5 8 toInt(wca2)) #WCA
text(-15 y + 15.5 8 th2) #TH
text(-15 y + 6.5 8 th2 + deviation) #MH

text(18 y + 26.5 8 toInt(gs2)) #GS
text(18 y + 15.5 8 toInt(time2)) #TIME, MIN
text(18 y + 6.5 8 toInt(time1 + time2)) #TIME, MIN

############ ARTWORK ##############

#DRAW GRAPHICS FOR EACH WAYPOINT
for i <- 0 to numberOfWaypoints{
 
  a = i * -29 # wpt entry height

  #LINEART
  line(-40 a + 94 90 a + 94) #main seperators
  line(-40 a + 64.7 90 a + 64.7) #main seperators
  line(-40 a + 84 50 a + 84) #sub 1
  line(-40 a + 74 50 a + 74) #sub 1
 
  #explanations
  text(-40 a + 81 3.5 "TT")
  text(-21 a + 81 3.5 "TH")
  text(-40 a + 71 3.5 "WCA")
  text(-21 a + 71 4.5 "MH")
  text( -3 a + 81 3.5 "DIST,INT")
  text( -3 a + 71 3.5 "DIST,ACC")
  text( 15 a + 91 3.5 "GS")
  text( 15 a + 81 3.5 "TIME,INT")
  text( 15 a + 71 3.5 "TIME,ACC")
  text( 33 a + 91 3.5 "ETA")
  text( 33 a + 81 3.5 "ATA")
  text( 33 a + 71 3.5 "DIFF")

  text( -3 a + 91 3.5 "wind:     /   ")

  #grid
  line(32 a + 94 32 a + 84) # GS / WIND sep lines
  line(14 a + 94 14 a + 84) # GS / WIND sep lines
  for j <- 0 to 4 {
    q = 18 * j
    line(q - 22 a + 84 q - 22 a + 65)
  }

  #notes
  text(52 a + 91 4 "shorthand/notes")

  text(-40 a + 89 7 i + 1 ) # wpt number
}
line(50 94 50 -130) # right line

#HEADER
text(-18 132 8 "VFR FLIGHT")
text(-18 125 10 "PLANNER")
line(14 135 14 94) # vertLine

text(18 125 7 "TAS:")
text(32 125 7 tas)
text(38 125 7 "KTS")

#footer
line(-40 -110 90 -110)

#fuel calculation
text(-38 -114 4 "fuel consumption")

#glide


######### LEFT SIDE: frequencies ########## 
line(-41 136 -41 -130)
text(-90 133 7 "FREQUENCIES")

for i <- -18 to 19 {
  line(-80 i * -7 -43 i * -7)
}

step = 7
offset  = -4

#INFORMATION
text(-90 offset + step * 18 5 "information")
text(-80 offset + step * 17 5 "COIF EAST: 127.075")
text(-80 offset + step * 16 5 "COIF WEST: 129.475")

#APPROACH
text(-90 offset + step * 13 5 "approach")
text(-80 offset + step * 11 5 "AAR APP: 127.075")
text(-80 offset + step * 10 5 "KAR APP: 129.475")
text(-80 offset + step * 9 5 "AAL APP: 129.475")
text(-80 offset + step * 8 5 "BLL APP: 129.475")

#TOWER
text(-90 offset + step * 5 5 "tower")
text(-80 offset + step * 4 5 "AAR TWR: 127.075")
text(-80 offset + step * 3 5 "KAR TWR: 129.475")
text(-80 offset + step * 2 5 "AAL TWR: 129.475")
text(-80 offset + step * 1 5 "BLL TWR: 129.475")

#RADIO
text(-90 offset + step * -2 5 "radio")
text(-80 offset + step * -3 5 "EKRD: 127.075")
text(-80 offset + step * -4 5 "EKVB: 129.475")
text(-80 offset + step * -5 5 "EKHS: 129.475")
text(-80 offset + step * -6 5 "EKVH: 129.475")
text(-80 offset + step * -7 5 "EKSV: 129.475")

#ATIS
text(-90 offset + step * -11 5 "atis")
text(-80 offset + step * -12 5 "EKBI: 127.075")
text(-80 offset + step * -13 5 "EKYT: 129.475")

#EMERGENCY
text(-90 offset + step * -15 5 "emergency")
text(-80 offset + step * -16 5 "IAD: 121.5")